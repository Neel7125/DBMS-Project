
CREATE TABLE Governorate(
	GovernorateID INT PRIMARY KEY,
	GovernorateName VARCHAR(20) NOT NULL
);

CREATE TABLE Constituency(
	ConstituencyID INT PRIMARY KEY,
	ConstituencyName CHAR(20) NOT NULL
);

CREATE TABLE  ConstituencyDetails(
	ConstituencyID INT ,
	DistrictID INT,
	PRIMARY KEY(ConstituencyID,DistrictID),

	FOREIGN KEY (DistrictID) REFERENCES District(DistrictID)
		ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY (ConstituencyID) REFERENCES Constituency(ConstituencyID)
		ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE District(
	DistrictID INT PRIMARY KEY,
	DistrictName VARCHAR(20) NOT NULL,
	GovernorateID INT NOT NULL,
	FOREIGN KEY (GovernorateID) REFERENCES Governorate(GovernorateID)
		ON DELETE SET NULL
);

CREATE TABLE City(
	CityID INT PRIMARY KEY,
	CityName VARCHAR(20) NOT NULL,
	DistrictID INT NOT NULL,
	No_of_Member INT DEFAULT 0,
	FOREIGN KEY (DistrictID) REFERENCES District(DistrictID)
		ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Quarter(
	QuarterID INT PRIMARY KEY,
	QuarterName VARCHAR(20) NOT NULL,
	CityID INT ,
	No_of_Mukhtar INT DEFAULT 0,
	FOREIGN KEY (CityID) REFERENCES City(CityID)
		ON UPDATE CASCADE ON DELETE CASCADE
);


CREATE TABLE Voter(
	VoterID CHAR(10) PRIMARY KEY,
	FirstName CHAR(20),
	MiddleName CHAR(20),
	LastName CHAR(20),
	BirthDate DATE NOT NULL,
	BirthPlace CHAR(20),
	QuarterID INT NOT NULL,
	PollingCenterID CHAR(4) NOT NULL,
	FSituation CHAR(3),
	Gender CHAR(1) DEFAULT 'M',
	FOREIGN KEY (QuarterID) REFERENCES Quarter(QuarterID)
		ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (PollingCenterID) REFERENCES PollingCenter(PCID)
		ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Seat(
	SeatID CHAR(4) PRIMARY KEY,
	SeatName VARCHAR(20) NOT NULL,
	DistrictID INT NOT NULL,
	FOREIGN KEY (DistrictID) REFERENCES District(DistrictID)
		ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Candidate(
	CandidateID CHAR(4) PRIMARY KEY,
	SeatID CHAR(4),
	FirstName VARCHAR(20),
	MiddleName VARCHAR(20),
	LastName VARCHAR(20),
	BirthDate DATE NOT NULL,
	Gender CHAR(1) DEFAULT 'M',
	PartyID CHAR(1) NOT NULL,
	VoterID CHAR(10),
	DistrictID INT,
	FOREIGN KEY (VoterID) REFERENCES Voter(VoterID)
		ON UPDATE CASCADE ON DELETE CASCADE

);

CREATE TABLE Nominating(
	CandidateID CHAR(4) PRIMARY KEY,
	CityID INT ,
	SeatID CHAR(4) ,
	QuarterID INT ,
	ElectionCycleID CHAR(5) ,
	NominationDate DATE NOT NULL,
	No_of_Votes INT DEFAULT 0,
	FOREIGN KEY (CandidateID) REFERENCES Candidate(CandidateID)
		ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (ElectionCycleID) REFERENCES ElectionCycle(ECID)
		ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (SeatID) REFERENCES Seat(SeatID)
		ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (QuarterID) REFERENCES Quarter(QuarterID)
		ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (CityID) REFERENCES City(CityID)
		ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE ElectionType(
	ETID CHAR(4) PRIMARY KEY,
	EType CHAR(20) NOT NULL

);

CREATE TABLE ElectionCycle(
	ECID CHAR(5) PRIMARY KEY,
	ElectionYear INT NOT NULL,
	ElectionTypeID CHAR(4) UNIQUE NOT NULL
	FOREIGN KEY (ElectionTypeID) REFERENCES ElectionType(ETID)

);

CREATE TABLE PollingCenter(
	PCID CHAR(4) PRIMARY KEY,
	PCName CHAR(20) NOT NULL,
	QuarterID INT NOT NULL,
	FOREIGN KEY (QuarterID) REFERENCES Quarter(QuarterID)
		ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE VoterBallot(
	VoterID CHAR(10),
	ElectionCycleID CHAR(5),
	Vote CHAR(1),
	PRIMARY KEY(VoterID,ElectionCycleID),
	FOREIGN KEY (VoterID) REFERENCES Voter(VoterID)
		ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (ElectionCycleID) REFERENCES ElectionCycle(ECID)
		ON DELETE CASCADE
);





